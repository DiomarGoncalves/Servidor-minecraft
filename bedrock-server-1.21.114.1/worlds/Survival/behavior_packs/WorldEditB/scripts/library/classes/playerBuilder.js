import{world as u}from"@minecraft/server";import{InputButton as y,ButtonState as m}from"@minecraft/server";import g from"whitelist.js";class f{hasPermission(t,o){if(!g()||!o)return!0;let n=!1;const i=o.split(".");for(const r of t.getTags()){const e=r.split(".");let s=!1;if(e[0].startsWith("+")?(s=!1,e[0]=e[0].substring(1)):e[0].startsWith("-")&&(s=!0,e[0]=e[0].substring(1)),e.every((a,l)=>a==i[l])){if(s)return!1;n=!0}}return n}find(t){return!!this.list().find(n=>n.name==t)}list(){return Array.from(u.getPlayers())}getInventory(t){return t.getComponent("minecraft:inventory").container}getEquipment(t){return t.getComponent("minecraft:equippable")}getItemCount(t,o){const n=[],i=this.getInventory(t);for(let r=0;r<i.size;r++){const e=i.getItem(r);e?.typeId==o&&n.push({count:e.amount,slot:r})}return n}getHeldItem(t){return this.getInventory(t).getItem(t.selectedSlotIndex)}isSneaking(t){return t.isSneaking||t.inputInfo.getButtonState(y.Sneak)===m.Pressed&&t.isFlying&&Math.abs(t.getVelocity().y)<.01}}const E=new f;export{E as Player,f as PlayerBuilder};
