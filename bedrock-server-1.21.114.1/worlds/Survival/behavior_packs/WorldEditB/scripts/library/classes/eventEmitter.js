class h{constructor(){this._listeners=[];this._configurations={maxListeners:10}}_addListener(e,t,s,i){const n=this.listenerCount(e);if(n>=this._configurations.maxListeners)throw`Warning: Possible EventEmitter memory leak detected. ${n+1} ${e} listeners added. Use emitter.setMaxListeners(n) to increase limit`;const r={eventName:e,listener:t,once:s,executed:!1};i?this._listeners.unshift(r):this._listeners.push(r)}_removeListener(e,t){typeof t=="number"&&this._listeners.splice(t,1);const s=this._listeners.findIndex(i=>i.eventName===e&&i.listener===t);s!==-1&&this._listeners.splice(s,1)}addListener(e,t){return this._addListener(e,t,!1),this}shutdown(){return this._listeners.length=0,this}emit(e,...t){let s=!1;return this._listeners.forEach(i=>{if(i.eventName===e){if(i.once&&i.executed)return;i.listener(...t),s=!0,i.executed=!0}}),s}eventNames(){return this._listeners.map(e=>e.eventName)}getMaxListeners(){return this._configurations?.maxListeners}listenerCount(e){return e?this._listeners.filter(t=>t.eventName===e).length:this._listeners.length}listeners(e){const t=[];return this._listeners.forEach(s=>{s.eventName===e&&!s.once&&t.push(s.listener)}),t}off(e,t){return this._removeListener(e,t),this}on(e,t){return this._addListener(e,t,!1),this}once(e,t){return this._addListener(e,t,!0),this}prependListener(e,t){return this._addListener(e,t,!1,!0),this}prependOnceListener(e,t){return this._addListener(e,t,!0,!0),this}removeAllListeners(e){e?this._listeners=this._listeners.filter(t=>t.eventName!==e):this._listeners=[]}removeListener(e,t){return this._removeListener(e,t),this}setMaxListeners(e){typeof e=="number"&&(this._configurations.maxListeners=e)}rawListeners(e){const t=[];return this._listeners.forEach(s=>{s.eventName===e&&t.push(s.listener)}),t}}export{h as EventEmitter};
