import{registerCommand as y}from"../register_commands.js";import{assertCuboidSelection as w}from"server/modules/assert.js";import{Cardinal as h}from"server/modules/directions.js";import{Pattern as R}from"server/modules/pattern.js";import{RawText as p}from"library/Minecraft.js";import{Jobs as g}from"server/modules/jobs.js";import{cut as k}from"../clipboard/cut.js";const v={name:"move",permission:"worldedit.region.move",description:"commands.wedit:move.description",usage:[{flag:"a"},{flag:"e"},{flag:"s"},{name:"amount",type:"int",default:1,range:[1,null]},{name:"offset",type:"Direction",default:new h},{name:"replace",type:"Pattern",default:new R("air")},{flag:"m",name:"mask",type:"Mask"}]};y(v,function*(e,a,n){w(e);const t=n.get("offset").getDirection(a).mul(n.get("amount")),s=a.dimension,[c,l]=e.selection.getRange(),r=c.offset(t.x,t.y,t.z),d=l.offset(t.x,t.y,t.z),o=e.history,i=o.record();let f;return yield*g.run(e,4,function*(){let m;try{if(yield*o.trackRegion(i,c,l),yield*o.trackRegion(i,r,d),!(m=yield*k(e,n,n.get("replace"),!1)))throw p.translate("commands.generic.wedit:commandFail");f=m.getVolume(),yield g.nextStep("Pasting blocks..."),yield*m.load(r,s),n.has("s")&&(o.trackSelection(i),e.selection.set(0,r),e.selection.set(1,d)),yield*o.commit(i)}catch(u){throw o.cancel(i),u}finally{e.deleteRegion(m)}}),p.translate("commands.wedit:move.explain").with(f)});
