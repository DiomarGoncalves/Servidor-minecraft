import{SphereBrush as d}from"../../brushes/sphere_brush.js";import{CylinderBrush as l}from"../../brushes/cylinder_brush.js";import{SmoothBrush as p}from"../../brushes/smooth_brush.js";import{assertClipboard as h,assertPermission as s}from"server/modules/assert.js";import{Mask as i}from"server/modules/mask.js";import{Pattern as c}from"server/modules/pattern.js";import{RawText as o}from"library/Minecraft.js";import{registerCommand as b}from"../register_commands.js";import{StructureBrush as f}from"server/brushes/structure_brush.js";import{ErosionBrush as y,ErosionType as m}from"server/brushes/erosion_brush.js";import{OverlayBrush as w}from"server/brushes/overlay_brush.js";import{BlobBrush as g}from"server/brushes/blob_brush.js";const n={name:"brush",description:"commands.wedit:brush.description",aliases:["br"],usage:[{subName:"none"},{subName:"sphere",permission:"worldedit.brush.sphere",description:"commands.wedit:brush.description.sphere",args:[{flag:"h"},{name:"pattern",type:"Pattern"},{name:"radius",type:"float",default:3}]},{subName:"cyl",permission:"worldedit.brush.cylinder",description:"commands.wedit:brush.description.cylinder",args:[{flag:"h"},{name:"pattern",type:"Pattern"},{name:"radius",type:"float",default:3},{name:"height",type:"int",default:3}]},{subName:"smooth",permission:"worldedit.brush.smooth",description:"commands.wedit:brush.description.smooth",args:[{name:"radius",type:"float",default:2},{name:"iterations",type:"int",default:4},{name:"mask",type:"Mask",default:new i}]},{subName:"struct",permission:"worldedit.brush.struct",description:"commands.wedit:brush.description.struct",args:[{subName:"clipboard",args:[{name:"mask",type:"Mask",default:new i}]},{subName:"_",args:[{name:"structureName",type:"string..."}]}]},{subName:"erode",permission:"worldedit.brush.erode",description:"commands.wedit:brush.description.erode",args:[{subName:"_",args:[{name:"radius",type:"float",default:3}]},{subName:"lift",args:[{name:"radius",type:"float",default:3}]},{subName:"fill",args:[{name:"radius",type:"float",default:3}]},{subName:"melt",args:[{name:"radius",type:"float",default:3}]},{subName:"smooth",args:[{name:"radius",type:"float",default:3}]}]},{subName:"overlay",permission:"worldedit.brush.overlay",description:"commands.wedit:brush.description.overlay",args:[{name:"pattern",type:"Pattern"},{name:"radius",type:"float",default:3},{name:"depth",type:"int",default:1},{name:"mask",type:"Mask",default:new i}]},{subName:"blob",permission:"worldedit.brush.blob",description:"commands.wedit:brush.description.blob",args:[{name:"pattern",type:"Pattern"},{name:"radius",type:"float",default:3},{name:"growPercent",type:"int",default:50,range:[1,99]},{name:"smoothness",type:"int",default:0,range:[0,6]}]}]};function K(){return new d(1,new c("cobblestone"),!1)}const P=(t,r,e)=>(s(r,n.usage[1].permission),t.bindTool("brush",null,new d(e.get("radius"),e.get("pattern"),e.get("h"))),o.translate("commands.wedit:brush.bind.sphere").with(e.get("radius"))),S=(t,r,e)=>(s(r,n.usage[2].permission),t.bindTool("brush",null,new l(e.get("radius"),e.get("height"),e.get("pattern"),e.get("h"))),o.translate("commands.wedit:brush.bind.cylinder").with(e.get("radius")).with(e.get("height"))),N=(t,r,e)=>{s(r,n.usage[3].permission),t.bindTool("brush",null,new p(e.get("radius"),e.get("iterations"),e.get("mask")));const a="commands.wedit:brush.bind.smooth."+(e.get("mask").empty()?"noFilter":"filter");return o.translate(a).with(e.get("radius")).with(e.get("iterations"))},T=(t,r,e)=>{s(r,n.usage[4].permission);const a=e.has("clipboard");a&&h(t),t.bindTool("brush",null,new f(a?t.clipboard:e.get("structureName"),e.get("mask")));const u="commands.wedit:brush.bind."+(a?"clipboard":"struct");return o.translate(u).with(e.get("structureName"))},M=(t,r,e)=>{s(r,n.usage[5].permission);let a=m.DEFAULT;return e.has("lift")?a=m.LIFT:e.has("fill")?a=m.FILL:e.has("melt")?a=m.MELT:e.has("smooth")&&(a=m.SMOOTH),t.bindTool("brush",null,new y(e.get("radius"),a)),t.setToolProperty(null,"traceMask",new i("!water,air,lava")),o.translate("commands.wedit:brush.bind.erode").with(e.get("radius"))},k=(t,r,e)=>(s(r,n.usage[1].permission),t.bindTool("brush",null,new w(e.get("radius"),e.get("depth"),e.get("pattern"),e.get("mask"))),t.setToolProperty(null,"traceMask",new i("!water,air,lava")),o.translate("commands.wedit:brush.bind.overlay").with(e.get("radius"))),v=(t,r,e)=>(s(r,n.usage[1].permission),t.bindTool("brush",null,new g(e.get("radius"),e.get("pattern"),e.get("growPercent"),e.get("smoothness"))),t.setToolProperty(null,"traceMask",new i("!water,air,lava")),o.translate("commands.wedit:brush.bind.blob").with(e.get("radius")));b(n,function(t,r,e){let a;if(e.has("erode"))a=M(t,r,e);else if(e.has("sphere"))a=P(t,r,e);else if(e.has("cyl"))a=S(t,r,e);else if(e.has("smooth"))a=N(t,r,e);else if(e.has("struct"))a=T(t,r,e);else if(e.has("overlay"))a=k(t,r,e);else if(e.has("blob"))a=v(t,r,e);else return t.unbindTool(null),"commands.wedit:brush.unbind";return a.append("text",`
`).append("translate","commands.generic.wedit:unbindInfo").with(";brush none")});export{K as createDefaultBrush};
