import{assertSelection as f}from"server/modules/assert.js";import{RawText as s,CommandPosition as h,Vector as d}from"library/Minecraft.js";import{registerCommand as x}from"../register_commands.js";import{getWorldHeightLimits as p}from"server/util.js";const y={name:"chunk",permission:"worldedit.selection.chunk",description:"commands.wedit:chunk.description",usage:[{flag:"c"},{flag:"s"},{subName:"_xz",args:[{name:"coordinates",type:"xz",default:new h}]},{subName:"_",args:[{name:"coordinates",type:"xyz"}]}]};function c(e){return e.x=Math.floor(e.x/16),e.y=Math.floor(e.y/16),e.z=Math.floor(e.z/16),e}function l(e,t,r){const a=r?p(e.player.dimension):[t[0].y*16,t[1].y*16+15];e.selection.mode=e.selection.mode=="extend"?"extend":"cuboid",e.selection.set(0,new d(t[0].x*16,a[0],t[0].z*16)),e.selection.set(1,new d(t[1].x*16+15,a[1],t[1].z*16+15))}x(y,function(e,t,r){const a=r.has("c"),u=r.has("s"),i=r.has("_xz"),m=r.get("coordinates");if(u){f(e);const o=e.selection.getRange(),n=[c(o[0]),c(o[1])];return l(e,n,i),s.translate("commands.wedit:chunk.selected-multiple").with(`${n[0].x}, ${i?"":`${n[0].y}, `}${n[0].z}`).with(`${n[1].x}, ${i?"":`${n[1].y}, `}${n[1].z}`)}else{a&&(m.x*=16,m.y*=16,m.z*=16);const o=c(m.relativeTo(t,!0));return l(e,[o,o],i),s.translate("commands.wedit:chunk.selected").with(`${o.x}, ${i?"":`${o.y}, `}${o.z}`)}});
