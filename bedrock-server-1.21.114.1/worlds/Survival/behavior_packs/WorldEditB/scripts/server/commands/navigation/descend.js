import{PlayerUtil as s}from"server/modules/player_util.js";import{RawText as r}from"library/Minecraft.js";import{registerCommand as m}from"../register_commands.js";import{getWorldHeightLimits as c}from"server/util.js";const a={name:"descend",permission:"worldedit.navigation.descend",description:"commands.wedit:descend.description",usage:[{name:"levels",type:"int",range:[1,null],default:1}]};function d(o){const t=o.dimension,n=c(t),e=s.getBlockLocation(o);for(e.y=Math.min(n[1],e.y-2);;e.y--){if(e.y<n[0])return!1;if(!t.getBlock(e).isAir&&!(e.y+1<=n[1]&&!t.getBlock(e.offset(0,1,0)).isAir)&&!(e.y+2<=n[1]&&!t.getBlock(e.offset(0,2,0)).isAir))return o.teleport(e.offset(.5,1,.5),{dimension:t}),!0}}m(a,function(o,t,n){const e=n.get("levels");let i=0;for(;d(t)&&(i++,i!=e););if(i==0)throw r.translate("commands.wedit:descend.obstructed");return r.translate("commands.wedit:thru.explain")});
