import{BlockStates as S}from"@minecraft/server";import{Tool as x}from"./base_tool.js";import{Tools as v}from"./tool_manager.js";import{print as P,wrap as f}from"server/util.js";import{Server as V}from"library/Minecraft.js";class k extends x{constructor(){super(...arguments);this.stateIndex=0;this.permission="worldedit.cycler"}useOn(e,o,t){V.player.isSneaking(e)?this.break(e,o,t):this.update(e,t,!0)}break(e,o,t){this.stateIndex++,this.update(e,t,!1)}update(e,o,t){const p=e.dimension.getBlock(o);let a=p.permutation;try{const l=Object.entries(a.getAllStates());let[i,s]=l[this.stateIndex%l.length];const r=S.get(i).validValues,n=r.indexOf(s);s=r[f(n+(t?1:0),r.length)],a=a.withState(i,s),p.setPermutation(a);const d=[];for(const[c,m]of l){let h="  "+c,u=m;if(c==i){if(typeof m=="boolean")u=s?"\xA78false \xA7ftrue":"\xA7ffalse \xA78true";else{const g=String(r[f(n-(t?0:1),r.length)]),y=String(r[f(n+(t?2:1),r.length)]);u=[`\xA78...${g.slice(-5)}`,"\xA7f"+s,`\xA78${y.slice(0,5)}...`].join(" ")}h="> "+c}d.push(`${h}: ${u}\xA7r`.padEnd(60))}P(d.join(`
`),e,!0)}catch{}}}v.register(k,"cycler_wand");
