import{BlockPermutation as o,BlockStates as s}from"@minecraft/server";class u{dataValueToStates(e,t){const r=o.resolve(e).getAllStates();for(const n in r){const{validValues:a}=s.get(n);r[n]=a[t%a.length],t/=a.length}return r}dataValueToPermutation(e,t){return o.resolve(e,this.dataValueToStates(e,t))}statesToDataValue(e){let t=0,r=1;for(const n in e){const{validValues:a}=s.get(n);t+=a.indexOf(e[n])*r,r*=a.length}return t}*iteratePermutations(e){let t=o.resolve(e);const r=Object.keys(t.getAllStates());if(r.length==0){yield t;return}yield*n(r.length);function*n(a){const i=r[--a];for(const l of Array.from(s.get(i).validValues)){if(t=t.withState(i,l),t.getState(i)!=l)return;a==0?yield t:yield*n(a)}}}itemToPermutation(e){const t=e.typeId;for(const r of this.iteratePermutations(t))if(r.getItemStack().isStackableWith(e))return r.getState("persistent_bit")!=null?r.withState("persistent_bit",!0):r;return o.resolve(t)}isAirOrFluid(e){if(!e)return!0;const t=e.type.id;return t=="minecraft:air"||t=="minecraft:water"||t=="minecraft:lava"}}const d=new u;export{d as Block,u as BlockBuilder};
