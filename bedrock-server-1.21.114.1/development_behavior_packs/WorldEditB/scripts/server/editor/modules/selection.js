import{EditorModule as l}from"./base";import{BlockVolume as m}from"@minecraft/server";import{Vector as o}from"library/Minecraft.js";import{Selection as u,setSelectionClass as a}from"server/modules/selection";import{CuboidShape as c}from"server/shapes/cuboid";const i=new WeakMap;class d extends u{constructor(){super(...arguments);this.mode="extend";this.visible=!0}get isEmpty(){return!this.volume||this.volume.isEmpty}get isCuboid(){return this.volume.get().getVolumeList().length===1}get points(){const e=this.volume.get();return this.isCuboid?[e.getVolumeList()[0].from,e.getVolumeList()[0].to].map(t=>o.from(t)):this.isEmpty?[void 0,void 0]:[e.getMin(),e.getMax()].map(t=>o.from(t))}set(e,t){this.isEmpty&&this.volume.add(new m(t,t));const n=this.volume.get().getVolumeList()[0];n[e===0?"from":"to"]=t,this.volume.set(n)}clear(){this.volume.clear()}getShape(){const e=this.volume.getBoundingBox(),t=o.sub(e.max,e.min).add(1);return[new c(t.x,t.y,t.z),o.from(e.min)]}*getBlocks(){for(const e of this.volume.get().getBlockLocationIterator())yield e}getBlockCount(){return this.volume.volumeCount}getRange(){const e=this.volume.getBoundingBox();return[o.from(e.min),o.from(e.max)]}get volume(){return i.get(this.player)?.volume}}a(d);class M extends l{constructor(r){super(r),i.set(this.player,this.session.extensionContext.selectionManager)}teardown(){i.delete(this.player)}}export{M as SelectionModule};
