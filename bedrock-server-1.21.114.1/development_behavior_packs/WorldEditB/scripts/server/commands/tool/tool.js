import{Server as s}from"library/Minecraft.js";import{registerCommand as l}from"../register_commands.js";import{assertPermission as i}from"server/modules/assert.js";import{Mask as c}from"server/modules/mask.js";import{RawText as r}from"library/Minecraft.js";import{Cardinal as m}from"server/modules/directions.js";const a={name:"tool",description:"commands.wedit:tool.description",usage:[{subName:"none"},{subName:"stacker",permission:"worldedit.tool.stack",description:"commands.wedit:tool.description.stacker",args:[{name:"range",type:"int",range:[1,null],default:1},{name:"mask",type:"Mask",default:new c}]},{subName:"extruder",permission:"worldedit.tool.extruder",description:"commands.wedit:tool.description.extruder",args:[{flag:"d"},{name:"range",type:"int",range:[1,null],default:1}]},{subName:"selwand",permission:"worldedit.setwand",description:"commands.wedit:tool.description.selwand"},{subName:"navwand",permission:"worldedit.setwand",description:"commands.wedit:tool.description.navwand"},{subName:"farwand",permission:"worldedit.farwand",description:"commands.wedit:tool.description.farwand"},{subName:"cmd",permission:"worldedit.tool.cmd",description:"commands.wedit:tool.description.cmd",args:[{name:"command",type:"string..."}]},{subName:"fill",permission:"worldedit.utility.fill",description:"commands.wedit:tool.description.fill",args:[{name:"pattern",type:"Pattern"},{name:"radius",type:"float"},{name:"depth",type:"int",range:[1,null],default:-1},{name:"direction",type:"Direction",default:new m(m.Dir.DOWN)}]},{subName:"repl",permission:"worldedit.repl",description:"commands.wedit:tool.description.repl",args:[{name:"pattern",type:"Pattern"}]},{subName:"cycler",permission:"worldedit.cycler",description:"commands.wedit:tool.description.cycler"}]};function d(n){return s.player.getHeldItem(n).typeId.replace("minecraft:","")}const p=(n,e,t)=>(i(e,a.usage[1].permission),n.bindTool("stacker_wand",null,t.get("range"),t.get("mask")),r.translate("commands.wedit:tool.bind.stacker").with(d(e))),w=(n,e,t)=>(i(e,a.usage[1].permission),n.bindTool("extruder_wand",null,t.get("range"),t.has("d")),r.translate("commands.wedit:tool.bind.extruder").with(d(e))),u=(n,e)=>(i(e,a.usage[2].permission),n.bindTool("selection_wand",null),r.translate("commands.wedit:tool.bind.selwand").with(d(e))),f=(n,e)=>(i(e,a.usage[3].permission),n.bindTool("navigation_wand",null),r.translate("commands.wedit:tool.bind.navwand").with(d(e))),y=(n,e)=>(i(e,a.usage[4].permission),n.bindTool("far_selection_wand",null),r.translate("commands.wedit:tool.bind.farwand").with(d(e))),g=(n,e,t)=>(i(e,a.usage[5].permission),n.bindTool("command_wand",null,t.get("command").join(" ")),r.translate("commands.wedit:tool.bind.cmd").with(d(e))),b=(n,e,t)=>(i(e,a.usage[6].permission),n.bindTool("fill_wand",null,t.get("pattern"),t.get("radius"),t.get("depth"),t.get("direction")),r.translate("commands.wedit:tool.bind.fill").with(d(e))),P=(n,e,t)=>(i(e,a.usage[7].permission),n.bindTool("replacer_wand",null,t.get("pattern")),r.translate("commands.wedit:tool.bind.repl").with(d(e))),h=(n,e)=>(i(e,a.usage[8].permission),n.bindTool("cycler_wand",null),r.translate("commands.wedit:tool.bind.cycler").with(d(e)));l(a,function(n,e,t){let o;if(t.has("stacker"))o=p(n,e,t);else if(t.has("extruder"))o=w(n,e,t);else if(t.has("selwand"))o=u(n,e);else if(t.has("navwand"))o=f(n,e);else if(t.has("farwand"))o=y(n,e);else if(t.has("cmd"))o=g(n,e,t);else if(t.has("fill"))o=b(n,e,t);else if(t.has("repl"))o=P(n,e,t);else if(t.has("cycler"))o=h(n,e);else return n.unbindTool(null),"commands.wedit:tool.unbind";return o.append("text",`
`).append("translate","commands.generic.wedit:unbindInfo").with(";tool none")});
