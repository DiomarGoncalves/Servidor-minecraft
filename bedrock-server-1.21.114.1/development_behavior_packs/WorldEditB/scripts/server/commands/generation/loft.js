import{Jobs as c}from"server/modules/jobs.js";import{registerCommand as u}from"../register_commands.js";import{CommandPosition as n,RawText as a,Vector as r}from"library/Minecraft.js";import{LoftShape as d}from"server/shapes/loft.js";import{printLocation as m}from"server/util.js";const w={name:"loft",permission:"worldedit.generation.shape",description:"commands.wedit:loft.description",usage:[{subName:"start_curve",args:[{name:"coordinates",type:"xyz",default:new n}]},{subName:"add_point",args:[{name:"coordinates",type:"xyz",default:new n}]},{subName:"set",args:[{name:"pattern",type:"Pattern"}]},{subName:"remove"},{subName:"clear"}]};u(w,function*(t,i,e){const o=e.has("coordinates")?r.from(e.get("coordinates").relativeTo(i)).floor():void 0;if(e.has("start_curve"))return t.loft?t.loft.newCurve(o):t.loft=new d([[o]]),a.translate("commands.wedit:loft.started").with(m(o));if(e.has("add_point"))return t.loft?t.loft.addPoint(o):t.loft=new d([[o]]),a.translate("commands.wedit:loft.added").with(m(o));if(e.has("clear"))return t.loft=void 0,"commands.wedit:loft.cleared";if(e.has("remove"))return t.loft.removeLastPoint()||(t.loft=void 0),t.loft?"commands.wedit:loft.removed":"commands.wedit:loft.removed.last";if(e.has("set")){if(!t.loft)throw"commands.wedit:loft.notStarted";if(e.get("_using_item")&&t.globalPattern.empty())throw a.translate("worldEdit.selectionFill.noPattern");const l=e.get("_using_item")?t.globalPattern:e.get("pattern"),f=yield*c.run(t,2,t.loft.generate(r.ZERO,l,void 0,t));return a.translate("commands.blocks.wedit:created").with(`${f}`)}return""});
