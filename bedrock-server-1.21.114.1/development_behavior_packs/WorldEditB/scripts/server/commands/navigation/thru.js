import{registerCommand as c}from"../register_commands.js";import{Cardinal as a}from"server/modules/directions.js";import{PlayerUtil as d}from"server/modules/player_util.js";import{getWorldHeightLimits as p}from"server/util.js";const h={name:"thru",permission:"worldedit.navigation.thru.command",description:"commands.wedit:thru.description"};c(h,function(g,e){const r=e.dimension,n=p(r),f=d.getBlockLocation(e),o=new a().getDirection(e);function m(t){return(t.y<n[0]||t.y>n[1]||r.getBlock(t).isAir)&&(t.y+1<n[0]||t.y+1>n[1]||r.getBlock(t.offset(0,1,0)).isAir)}let i=f.offset(o.x,o.y,o.z);if(m(i))throw"commands.wedit:thru.none";let s=!1;for(let t=0;t<(o.y==0?3:4);t++)if(i=i.offset(o.x,o.y,o.z),m(i)){s=!0;break}if(s)return e.teleport(i.offset(.5,0,.5),{dimension:r}),"commands.wedit:thru.explain";throw"commands.wedit:thru.obstructed"});
