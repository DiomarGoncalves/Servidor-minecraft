import{assertCuboidSelection as g}from"server/modules/assert.js";import{Cardinal as a}from"server/modules/directions.js";import{RawText as C}from"library/Minecraft.js";import{Vector as w}from"library/Minecraft.js";import{registerCommand as D}from"../register_commands.js";const I={name:"contract",description:"commands.wedit:contract.description",permission:"worldedit.selection.contract",usage:[{subName:"_",args:[{name:"amount",type:"int"},{name:"direction",type:"Direction",default:new a(a.Dir.FORWARD)}]},{subName:"_reverse",args:[{name:"amount",type:"int"},{name:"reverseAmount",type:"int"},{name:"direction",type:"Direction",default:new a(a.Dir.FORWARD)}]}]};D(I,function(e,l,o){g(e);const t=e.selection.points.map(x=>w.from(x)),n=o.get("direction").getDirection(l),m=n.x?0:n.y?1:2,s=Math.max(o.get("amount"),0)+Math.max(-(o.get("reverseAmount")??0),0),u=Math.max(-o.get("amount"),0)+Math.max(o.get("reverseAmount")??0,0);let[i,r]=[-1,-1];const[c,d]=[t[0].getIdx(m),t[1].getIdx(m)];n.getIdx(m)>=0?[i,r]=c>d?[1,0]:[0,1]:[i,r]=c<d?[1,0]:[0,1],t[i]=t[i].add(n.mul(s)),t[r]=t[r].sub(n.mul(u));const f=e.selection.getBlockCount();e.selection.clear(),e.selection.set(0,t[0].floor()),e.selection.set(1,t[1].floor());const p=e.selection.getBlockCount();return C.translate("commands.wedit:contract.explain").with(f-p)});
