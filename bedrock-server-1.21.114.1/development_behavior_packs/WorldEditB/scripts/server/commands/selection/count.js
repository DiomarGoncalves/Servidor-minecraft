import{assertSelection as u}from"server/modules/assert.js";import{Jobs as t}from"server/modules/jobs.js";import{RawText as k}from"library/Minecraft.js";import{registerCommand as f}from"../register_commands.js";const p={name:"count",description:"commands.wedit:count.description",permission:"worldedit.analysis.count",usage:[{name:"mask",type:"Mask"}]};f(p,function*(o,i,c){u(o);const m=c.get("mask").withContext(o),r=i.dimension,s=o.selection.getBlockCount(),a=yield*t.run(o,1,function*(){let l=0,n=0;yield t.nextStep("Counting blocks...");for(const e of o.selection.getBlocks()){const d=r.getBlock(e)??(yield*t.loadBlock(e));n+=m.matchesBlock(d)?1:0,yield t.setProgress(++l/s)}return n});return k.translate("commands.wedit:count.explain").with(a)});
