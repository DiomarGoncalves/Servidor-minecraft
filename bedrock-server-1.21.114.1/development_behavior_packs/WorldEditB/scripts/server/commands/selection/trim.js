import{assertCuboidSelection as l}from"server/modules/assert.js";import{Mask as g}from"server/modules/mask.js";import{registerCommand as k}from"../register_commands.js";const p={name:"trim",description:"commands.wedit:trim.description",permission:"worldedit.selection.trim",usage:[{name:"mask",type:"Mask",default:new g("#existing")}]};k(p,function*(e,s,c){l(e);const a=c.get("mask").withContext(e),[n,i]=e.selection.getRange(),d=s.dimension;for(const t of[["x","y","z"],["y","z","x"],["z","x","y"]])t:for(const[m,f,r]of[[n,i,1],[i,n,-1]]){for(const o=m.clone();Math.sign(o[t[0]]-f[t[0]])!=r;o[t[0]]+=r)for(m[t[0]]=o[t[0]],o[t[1]]=n[t[1]];o[t[1]]<=i[t[1]];o[t[1]]++)for(o[t[2]]=n[t[2]];o[t[2]]<=i[t[2]];o[t[2]]++){if(a.matchesBlock(d.getBlock(o)))continue t;yield}throw"commands.wedit:trim.no-blocks"}return e.selection.set(0,n),e.selection.set(1,i),"commands.wedit:trim.explain"});
