import{Shape as r}from"./base_shape.js";import{Vector as a}from"library/Minecraft.js";class x extends r{constructor(e,t,i,s){super();this.radii=[0,0];this.customHollow=!0;this.height=e,this.radii[0]=t,this.radii[1]=i??this.radii[0],(s?.x??0)!==0?this.axes=["y","x","z"]:(s?.z??0)!==0?this.axes=["x","z","y"]:this.axes=["x","y","z"]}getRegion(e){const t=new a(0,-this.height/2,0).ceil(),i=t.offset(-this.radii[0],0,-this.radii[1]),s=t.offset(this.radii[0],this.height-1,this.radii[1]);return[e.offset(i[this.axes[0]],i[this.axes[1]],i[this.axes[2]]),e.offset(s[this.axes[0]],s[this.axes[1]],s[this.axes[2]])]}getYRange(e,t){const[i,s]=[e/(this.radii[0]+.5),t/(this.radii[1]+.5)];return i*i+s*s>1?null:[-this.height/2,this.height-1-this.height/2]}getOutline(){const e=new a(0,-this.height/2,0).ceil(),t=e.offset(.5,0,.5),i=Math.max(...this.radii)+.5,s=[t.add([-i,0,0]),t.add([-i,this.height,0]),t.add([i,0,0]),t.add([i,this.height,0]),t.add([0,0,-i]),t.add([0,this.height,-i]),t.add([0,0,i]),t.add([0,this.height,i])],h=[[0,1],[2,3],[4,5],[6,7]];return[...this.drawCircle(e.sub([0,.5,0]),i,"y"),...this.drawCircle(e.sub([0,.5,0]).add([0,this.height,0]),i,"y"),...this.drawShape(s,h)]}prepGeneration(e,t){e.isHollow=t?.hollow??!1,e.radiiOff=this.radii.map(i=>i+.5),e.thickness=t?.hollowThickness??1}inShape(e,t){if(t.isHollow){const s=t.thickness,h=[e[this.axes[0]]/(t.radiiOff[0]-s),e[this.axes[2]]/(t.radiiOff[1]-s)];if(h[0]*h[0]+h[1]*h[1]<1)return!1}const i=[e[this.axes[0]]/t.radiiOff[0],e[this.axes[2]]/t.radiiOff[1]];return i[0]*i[0]+i[1]*i[1]<=1}}export{x as CylinderShape};
